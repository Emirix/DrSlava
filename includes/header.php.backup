<?php
require_once "language.php";
if (!isset($config) || !is_array($config)) {
    $config = require __DIR__ . "/../config.php";
}
?>
<!DOCTYPE html>
<html lang="<?php echo getCurrentLang(); ?>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <?php
    // SEO Defaults
    $meta_title = isset($page_title)
        ? $page_title . " | " . __t("brand_name")
        : __t("brand_name") . " | " . __t("slogan");
    $meta_desc = isset($page_description)
        ? $page_description
        : __t("meta.description");
    $meta_keys = isset($page_keywords) ? $page_keywords : __t("meta.keywords");

    // Canonical URL construction
    $protocol =
        isset($_SERVER["HTTPS"]) && $_SERVER["HTTPS"] === "on"
            ? "https"
            : "http";
    $canonical_url =
        $protocol .
        "://" .
        $_SERVER["HTTP_HOST"] .
        strtok($_SERVER["REQUEST_URI"], "?");
    ?>

    <title><?php echo $meta_title; ?></title>
    <meta name="description" content="<?php echo $meta_desc; ?>">
    <meta name="keywords" content="<?php echo $meta_keys; ?>">
    <link rel="canonical" href="<?php echo $canonical_url; ?>">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="<?php echo $canonical_url; ?>">
    <meta property="og:title" content="<?php echo $meta_title; ?>">
    <meta property="og:description" content="<?php echo $meta_desc; ?>">
    <meta property="og:site_name" content="<?php echo __t("brand_name"); ?>">
    <!-- You might want to add a default og:image here -->

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="<?php echo $canonical_url; ?>">
    <meta property="twitter:title" content="<?php echo $meta_title; ?>">
    <meta property="twitter:description" content="<?php echo $meta_desc; ?>">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;1,400&family=Poppins:wght@200;300;400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        nude: {
                            50: '#FDFBF9',
                            100: '#F8F4EF',
                            200: '#EFE6DA',
                            300: '#E4D3BF',
                            400: '#D5B799',
                            500: '#C19A74'
                        },
                        gold: {
                            400: '#D4AF37',
                            500: '#B8860B'
                        }
                    },
                    fontFamily: {
                        serif: ['"Cormorant Garamond"', 'serif'],
                        sans: ['"Poppins"', 'sans-serif']
                    },
                    animation: {
                        'fade-in': 'fadeIn 1s ease-out forwards',
                        'slide-up': 'slideUp 0.8s ease-out forwards'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #FDFBF9;
            color: #4A4540;
        }
        .luxury-shadow {
            box-shadow: 0 10px 40px -10px rgba(193, 154, 116, 0.1);
        }
        .masonry-grid {
            column-count: 2;
            column-gap: 1.5rem;
        }
        @media (min-width: 768px) {
            .masonry-grid {
                column-count: 3;
            }
        }
        .masonry-item {
            break-inside: avoid;
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body class="font-sans">
    <?php
    $current_page = pathinfo(basename($_SERVER["PHP_SELF"]), PATHINFO_FILENAME);
    $navLinks = [
        ["name" => __t("nav.home"), "path" => "index"],
        ["name" => __t("nav.services"), "path" => "hizmetler"],
        ["name" => __t("nav.gallery"), "path" => "galeri"],
        ["name" => __t("nav.locations"), "path" => "subelerimiz"],
        ["name" => __t("nav.contact"), "path" => "iletisim"],
    ];
    ?>
    <nav class="sticky top-0 z-50 bg-nude-50/80 backdrop-blur-md border-b border-nude-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
          <div class="flex-shrink-0 flex items-center">
            <a href="index" class="font-serif text-3xl tracking-widest text-nude-500 hover:text-nude-400 transition-colors">
              <?php echo __t("brand_name"); ?>
            </a>
          </div>

          <div class="hidden md:flex items-center space-x-8">
            <div class="flex items-baseline space-x-8">
              <?php foreach ($navLinks as $link): ?>
                <a
                  href="<?php echo $link["path"]; ?>"
                  class="text-sm font-light uppercase tracking-widest hover:text-nude-500 transition-colors duration-300 <?php echo $current_page ==
                  $link["path"]
                      ? "text-nude-500 font-medium"
                      : ""; ?>"
                >
                  <?php echo $link["name"]; ?>
                </a>
              <?php endforeach; ?>
            </div>

            <div class="flex items-center space-x-6 pl-8 border-l border-nude-200">
              <!-- Language Switcher -->
              <div class="flex items-center gap-2 mr-2">
                  <a href="<?php echo getLangUrl(
                      "tr",
                  ); ?>" class="text-[10px] font-medium <?php echo getCurrentLang() ==
"tr"
    ? "text-nude-500 border-b border-nude-500"
    : "text-gray-400"; ?>">TR</a>
                  <span class="text-gray-300 text-xs">|</span>
                  <a href="<?php echo getLangUrl(
                      "en",
                  ); ?>" class="text-[10px] font-medium <?php echo getCurrentLang() ==
"en"
    ? "text-nude-500 border-b border-nude-500"
    : "text-gray-400"; ?>">EN</a>
              </div>

              <a
                href="iletisim"
                class="bg-nude-400 text-white px-6 py-2 rounded-full text-sm font-medium hover:bg-nude-500 transition-all transform hover:scale-105 shadow-sm"
              >
                <?php echo __t("nav.book_now"); ?>
              </a>
            </div>
          </div>

          <div class="md:hidden flex items-center space-x-4">
            <button
              id="mobile-menu-button"
              class="text-nude-500 hover:text-nude-400 focus:outline-none"
            >
              <svg id="menu-icon" class="h-8 w-8" fill="none" strokeLinecap="round" strokeLinejoin="round" strokeWidth="1.5" viewBox="0 0 24 24" stroke="currentColor">
                <path d="M4 6h16M4 12h16m-7 6h7" />
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile Menu -->
      <div id="mobile-menu" class="hidden md:hidden bg-nude-50 animate-fade-in border-b border-nude-100">
          <div class="px-4 pt-4 pb-8 space-y-4 text-center">
            <?php foreach ($navLinks as $link): ?>
              <a
                href="<?php echo $link["path"]; ?>"
                class="block text-lg font-serif tracking-widest hover:text-nude-500 transition-colors"
              >
                <?php echo $link["name"]; ?>
              </a>
            <?php endforeach; ?>

            <!-- Mobile Language Switcher -->
            <div class="flex justify-center gap-4 py-2 border-t border-nude-100 mt-4 pt-4">
                <a href="<?php echo getLangUrl(
                    "tr",
                ); ?>" class="text-xs font-medium <?php echo getCurrentLang() ==
"tr"
    ? "text-nude-500 underline"
    : "text-gray-400"; ?>">TÜRKÇE</a>
                <a href="<?php echo getLangUrl(
                    "en",
                ); ?>" class="text-xs font-medium <?php echo getCurrentLang() ==
"en"
    ? "text-nude-500 underline"
    : "text-gray-400"; ?>">ENGLISH</a>
            </div>

            <a
              href="iletisim"
              class="inline-block bg-nude-400 text-white px-8 py-3 rounded-full text-base font-medium shadow-md w-full max-w-xs mt-4"
            >
              <?php echo __t("nav.book_now"); ?>
            </a>
          </div>
      </div>
    </nav>

    <script>
        const menuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const menuIcon = document.getElementById('menu-icon');

        menuButton.addEventListener('click', () => {
            const isOpen = !mobileMenu.classList.contains('hidden');
            if (!isOpen) {
                mobileMenu.classList.remove('hidden');
                menuIcon.innerHTML = '<path d="M6 18L18 6M6 6l12 12" />';
            } else {
                mobileMenu.classList.add('hidden');
                menuIcon.innerHTML = '<path d="M4 6h16M4 12h16m-7 6h7" />';
            }
        });
    </script>
<ctrl63>
